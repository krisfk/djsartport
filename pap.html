<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="./pap.css" rel="stylesheet" >

    <script type="text/javascript">

const inputs = document.querySelectorAll('.otp-input input');
          const timerDisplay = document.getElementById('timer');
          const resendLink = document.querySelector('.resend-link');
        //   const emailSpan = document.getElementById('email');
          let timeLeft = 120; // 2 minutes in seconds
          let timerId;
          let canResend = true;

          // Simulating an email for demonstration
        //   emailSpan.textContent = "user@example.com";

          function startTimer() {
              timerId = setInterval(() => {
                  if (timeLeft <= 0) {
                      clearInterval(timerId);
                      timerDisplay.textContent = "Code expired";
                      timerDisplay.classList.add('expired');
                      inputs.forEach(input => input.disabled = true);
                      canResend = false;
                  } else {
                      const minutes = Math.floor(timeLeft / 60);
                      const seconds = timeLeft % 60;
                      timerDisplay.textContent = `(${minutes}:${seconds.toString().padStart(2, '0')})`;
                      timeLeft--;
                  }
              }, 1000);
          }

          function resendOTP() {
              if (canResend) {
                  alert("New OTP sent!");
                  timeLeft = 120;
                  inputs.forEach(input => {
                      input.value = '';
                      input.disabled = false;
                  });
                  inputs[0].focus();
                  clearInterval(timerId);
                  timerDisplay.classList.remove('expired');
                  startTimer();
              } else {
                  alert("Cannot resend code. Time has expired.");
              }
          }

          inputs.forEach((input, index) => {
              input.addEventListener('input', (e) => {
                  if (e.target.value.length > 1) {
                      e.target.value = e.target.value.slice(0, 1);
                  }
                  if (e.target.value.length === 1) {
                      if (index < inputs.length - 1) {
                          inputs[index + 1].focus();
                      }
                  }
              });

              input.addEventListener('keydown', (e) => {
                  if (e.key === 'Backspace' && !e.target.value) {
                      if (index > 0) {
                          inputs[index - 1].focus();
                      }
                  }
                  if (e.key === 'e') {
                      e.preventDefault();
                  }
              });
          });

          function verifyOTP() {
              const otp = Array.from(inputs).map(input => input.value).join('');
              if (otp.length === 6) {
                  if (timeLeft > 0) {
                      alert(`Verifying OTP: ${otp}`);
                  } else {
                      alert('OTP has expired. Please request a new one.');
                  }
              } else {
                  alert('Please enter a 6-digit OTP');
              }
          }

          startTimer();
          
    </script>
</head>

<body>
    
    <div class="lightbox">


        <div class="text-center mt-5">
        <img class="treasure-box" src="./pap/close-treasure-box.png" alt="">


        <div>

            <div class="otp-input">
                <input type="number" min="0" max="9" required>
                <input type="number" min="0" max="9" required>
                <input type="number" min="0" max="9" required>
                <input type="number" min="0" max="9" required>
                <input type="number" min="0" max="9" required>
                <input type="number" min="0" max="9" required>
            </div>
            <button onclick="verifyOTP()">Verify</button>

        </div>
    </div>

    </div>
    
    <div class="main-container g-0 pt-4">

        <div class="text-center">
            <img class="djs-logo" src="./pap/djs-logo.jpg" alt="">
        </div>

        <h1 class="main-title mt-4">聖誕中環大館解謎之夜</h1>

        <h2 class="task-title mt-2">任務：解開神秘寶箱密碼(???)</h2>

        <div class="instruction mt-3">
            大館某3個地點各隱藏了一組數字，<br>
            請步行到這些地點並利用以下提示猜猜每個地點的數字，<br>
            從而找出解鎖密碼！
                   </div>


        <div class="row mt-4 mx-2 g-3">
            <div class="col-6 mt-0 mb-3">

                <div class="tip-block">
                提示 1: <br>
                jail# <br>
              <span> 1 -> 22</span>  <span class="ms-2"> 3 -> ??</span>
                </div>
    
            </div>
            <div class="col-6 mt-0  mb-3">

                <div class="  tip-block">
                    提示 2: <br>
                    PAP# - A = ???
                    </div>
            </div>
            <div class="col-6 mt-0">

                <div class="  tip-block">
                    提示 3: <br>
                    ( 4 * 1 ) / ( 2 - 🏆 ) <br>
                    =>🔐???
                    </div>
            </div>
            <div class="col-6 mt-0">

                <div class="  tip-block">
                    提示 4: <br>
                    囚犯 YYYY = ????
                    
                    </div>
            </div>

        </div>


        <div class="mt-3 text-center">
        <button type="button" class="btn btn-success">TRY TO UNLOCK</button>
    </div>
        <!-- d -->
        <!-- <img class="bg-img" src="./pap/bg.jpg" alt=""> -->
    </div>
</body>
</html>